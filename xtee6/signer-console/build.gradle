
plugins {
  id "eu.appsatori.fatjar" version "0.3"
}

dependencies {
    compile 'org.apache.commons:commons-lang3:3.1'
    
    compile 'ch.qos.logback:logback-access:1.0.7'
    compile 'ch.qos.logback:logback-classic:1.0.6'

    compile 'com.typesafe.akka:akka-actor_2.10:2.2.1'
    compile 'com.typesafe.akka:akka-remote_2.10:2.2.1'
    
    compile 'commons-cli:commons-cli:1.2'
    
    compile project(':common-util')
    compile project(':signer-protocol')
    
    compile files('libs/asg.cliche-110413.jar')
}

fatJarPrepareFiles {
    include '*'
}

fatJar {
    exclude "META-INF/*.SF"
    exclude "META-INF/*.DSA"
    exclude "META-INF/*.RSA"

    manifest {
        attributes 'Main-Class': 'ee.cyber.sdsb.signer.console.SignerCLI'
    }
}

jar.enabled = false
build.dependsOn fatJar
buildall.dependsOn fatJar

task runSignerConsole(type: JavaExec) {
    jvmArgs '-Djava.library.path=../legacy/passwordstore'
    main = 'ee.cyber.sdsb.signer.console.SignerCLI'
    classpath = sourceSets.test.runtimeClasspath
    standardInput = System.in;
}
