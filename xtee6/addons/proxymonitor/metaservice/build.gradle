plugins {
    id 'java'
    id 'com.github.johnrengelman.shadow' version '1.2.2'
}

dependencies {
    compile project(':common-util')
    compile project(':proxy')
    compile project(':monitor-common')
    compile project(':monitoring-conf')
    compile project(':addons:proxymonitor:common')

    compile 'com.google.guava:guava:18.0'
}

task licenseFormatJava(type:nl.javadude.gradle.plugins.license.License) {
    source = fileTree('src/main/java')
}

task licenseTestJava(type:nl.javadude.gradle.plugins.license.License) {
    source = fileTree('src/main/java')
    check = true
}

licenseFormatMain.enabled = false
licenseMain.enabled = false

licenseFormat.dependsOn licenseFormatJava
licenseTest.dependsOn licenseTestJava


jar {
    enabled = false
}

install {
    enabled = false
}

shadowJar {
    baseName = "proxymonitor-metaservice"
    classifier = ''
    dependencies {
        include(project(':addons:proxymonitor:common'))
        include(project(':monitor-common'))
        include(project(':monitoring-conf'))
    }
}

build.dependsOn shadowJar
buildall.dependsOn shadowJar

