<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <changeSet author="toja" id="1-update">
        <createTable tableName="CLIENT_ISCERTS">
            <column name="CLIENT_ID" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="CERTIFICATE_ID" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <createTable tableName="SERVICE_SECURITYCATEGORIES">
            <column name="SERVICE_ID" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="SECURITY_CAT_ID" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseColumnNames="CLIENT_ID" baseTableName="CLIENT_ISCERTS" constraintName="FK_CSNP8DR3VI3NGG9RGWEW3C89D" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="CLIENT"/>
        <addForeignKeyConstraint baseColumnNames="CERTIFICATE_ID" baseTableName="CLIENT_ISCERTS" constraintName="FK_IHJWTUISQGOTC308XVO768YTY" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="CERTIFICATE"/>
        <addForeignKeyConstraint baseColumnNames="SECURITY_CAT_ID" baseTableName="SERVICE_SECURITYCATEGORIES" constraintName="FK_JUG7E4JTIIOJG492HH1I10QR0" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="IDENTIFIER"/>
        <addForeignKeyConstraint baseColumnNames="SERVICE_ID" baseTableName="SERVICE_SECURITYCATEGORIES" constraintName="FK_OR1XKHDC830058RH2KPDGJVD0" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ID" referencedTableName="SERVICE"/>
        <dropForeignKeyConstraint baseTableName="WSDL" constraintName="FK_466HBX0GK5NHUF3PLD4F4Y3WW"/>
        <dropForeignKeyConstraint baseTableName="CLIENT" constraintName="FK_H1RHH1REP2JMGPW425QNO74PY"/>
        <dropForeignKeyConstraint baseTableName="IDENTIFIER" constraintName="FK_Q4EOOVRXORU4BCYDXHGD77IN8"/>
        <dropForeignKeyConstraint baseTableName="SERVICE" constraintName="FK_Q5M2VUOMOQ6X9QUB6RBDDWDE4"/>
        <dropForeignKeyConstraint baseTableName="CERTIFICATE" constraintName="FK_SM6KK4LBADIIIS4MJ1LTP15H9"/>
        <dropColumn columnName="CLIENT" tableName="WSDL"/>
        <dropColumn columnName="CLIENT_ID" tableName="CERTIFICATE"/>
        <dropColumn columnName="CONF" tableName="CLIENT"/>
        <dropColumn columnName="IDX" tableName="ACL"/>
        <dropColumn columnName="IDX" tableName="AUTHORIZEDSUBJECT"/>
        <dropColumn columnName="IDX" tableName="CERTIFICATE"/>
        <dropColumn columnName="IDX" tableName="CLIENT"/>
        <dropColumn columnName="IDX" tableName="GLOBALCONFDISTRIBUTOR"/>
        <dropColumn columnName="IDX" tableName="GROUPMEMBER"/>
        <dropColumn columnName="IDX" tableName="IDENTIFIER"/>
        <dropColumn columnName="IDX" tableName="LOCALGROUP"/>
        <dropColumn columnName="IDX" tableName="SERVICE"/>
        <dropColumn columnName="IDX" tableName="TSP"/>
        <dropColumn columnName="IDX" tableName="WSDL"/>
        <dropColumn columnName="SERVICE_ID" tableName="IDENTIFIER"/>
        <dropColumn columnName="WSDL" tableName="SERVICE"/>
        <dropNotNullConstraint columnDataType="int8" columnName="IDENTIFIER" tableName="CLIENT"/>
    </changeSet>
</databaseChangeLog>
