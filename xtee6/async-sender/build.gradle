def mainClass = 'ee.cyber.sdsb.asyncsender.Main'

dependencies {
    compile project(':common-util')
    compile project(':async-db')
    
    testCompile project(':common-test')
    testCompile 'org.mockito:mockito-core:1.9.0'
}

jar {
    // Build 'fat jar'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }} {
        // remove all signature files (necessary to make it run)
        exclude "META-INF/*.SF"
        exclude "META-INF/*.DSA"
        exclude "META-INF/*.RSA"
    }
    manifest {
        attributes 'Main-Class': mainClass
    }
}

task runAsyncSender(type: JavaExec) {
    main = mainClass
    classpath = sourceSets.main.runtimeClasspath
    description = "Starts Async Sender main program.";
}
