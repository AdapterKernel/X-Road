dependencies {
    compile project(':common-ui')

    compile project(':common-verifier')
    compile project(':signer-protocol')
}

clean << {
    project.delete "vendor/engines/common-ui"
    project.delete "vendor/engines/center-common"
}

task copyCommon(type: Copy) {
    into "vendor/engines/common-ui"
    from "../common-ui"
    exclude '**/build/**'
}

task copyCenterCommon(type: Copy) {
    into "vendor/engines/center-common"
    from "../center-common"
}

task copyDeps(dependsOn: [copyCommon, copyCenterCommon], type: Copy) {
    into "$buildDir/libs"
    from configurations.compile
}

// TODO - We might want to get rid of warning at .war file generation
task warble(dependsOn: [copyDeps, ':center-service:build'], type: Exec) {
    commandLine = ['jruby', '-S', 'warble']
}

task runModelTests(type: Exec) {
    commandLine = ['jruby', '-S', 'rake', 'test:units']
}

task runControllerTests(type: Exec) {
    commandLine = ['jruby', '-S', 'rake', 'test:controllers']
}

build.dependsOn copyDeps
