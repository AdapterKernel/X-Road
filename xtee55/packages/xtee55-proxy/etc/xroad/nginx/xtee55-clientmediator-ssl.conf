server {
	listen 443 default;
	access_log  /var/log/nginx/localhost_ssl.access.log;

	ssl on;
	ssl_certificate /etc/xroad/ssl/internal.crt;
	ssl_certificate_key /etc/xroad/ssl/internal.key;

	ssl_protocols        TLSv1 TLSv1.1 TLSv1.2;
	ssl_ciphers ECDH+AESGCM:DH+AESGCM:ECDH+AES256:DH+AES256:ECDH+AES128:DH+AES:ECDH+3DES:DH+3DES:RSA+AES:RSA+3DES:!aNULL:!MD5:!DSS;
	ssl_prefer_server_ciphers on;
	ssl_session_cache    shared:SSL:10m;
	ssl_session_timeout  10m;

	ssl_verify_client optional_no_ca;

	keepalive_timeout    60;

	
	location / {
		proxy_read_timeout 600s;
		proxy_buffering off;
 		proxy_set_header x_ssl_client_verify $ssl_client_verify;
 		proxy_set_header x_ssl_client_cert $ssl_client_cert;
		proxy_pass http://localhost:6668;
	}
}

