plugins {
  id "eu.appsatori.fatjar" version "0.3"
}

dependencies {
    compile project(':mediator-common')

    // X-Road 6.0 dependencies
    compile 'ee.ria.xroad:serverconf:1.0'
    compile 'ee.ria.xroad:signer-protocol:1.0'
    compile 'ee.ria.xroad:common-ui:1.0'

    // Additional 3rd party dependencies
    compile 'commons-cli:commons-cli:1.2'
}

fatJarPrepareFiles {
    include '*'
}

fatJar {
    exclude "META-INF/*.SF"
    exclude "META-INF/*.DSA"
    exclude "META-INF/*.RSA"

    manifest {
        attributes 'Main-Class': 'ee.cyber.xroad.confimporter.Main'
    }
}

jar.enabled = false
build.dependsOn fatJar

task runConfImporterTest(type: JavaExec) {
    main = 'ee.cyber.xroad.confimporter.ConfImporterTest'
    classpath = sourceSets.test.runtimeClasspath
}
